name: Smoke Test Stage

on:
  workflow_call:
    inputs:
      change-id:
        required: true
        type: string
        description: "PR number or change identifier"
      preview-urls:
        required: true
        type: string
        description: "Base64-encoded JSON of preview URLs"

jobs:
  pr-comment:
    name: PR Comment
    uses: ./.github/workflows/job.pr-comment.yml
    with:
      change-id: ${{ inputs.change-id }}
      preview-urls: ${{ inputs.preview-urls }}

  smoke-test:
    name: Smoke Test
    uses: ./.github/workflows/job.smoke-test.yml
    with:
      preview-urls: ${{ inputs.preview-urls }}
